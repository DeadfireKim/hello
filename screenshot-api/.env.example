# ==============================================================================
# Screenshot API - Environment Configuration
# ==============================================================================
# 이 파일을 .env.local로 복사하여 사용하세요
# cp .env.example .env.local

# ==============================================================================
# Server Configuration
# ==============================================================================

# API 서버 포트
PORT=3000

# API Base URL
NEXT_PUBLIC_API_URL=http://localhost:3000

# Node 환경 (development | production)
NODE_ENV=development

# ==============================================================================
# Rate Limiting
# ==============================================================================

# IP당 최대 요청 수 (기본: 10)
RATE_LIMIT_MAX_REQUESTS=10

# Rate limit 윈도우 (밀리초) - 기본: 60000 (60초)
RATE_LIMIT_WINDOW_MS=60000

# 만료된 기록 정리 주기 (밀리초) - 기본: 300000 (5분)
RATE_LIMIT_CLEANUP_INTERVAL_MS=300000

# ==============================================================================
# Worker & Queue
# ==============================================================================

# 동시 처리 작업 수 (기본: 5)
WORKER_CONCURRENCY=5

# 작업 최대 재시도 횟수 (기본: 3)
WORKER_MAX_RETRIES=3

# 완료된 작업 정리 기준 시간 (밀리초) - 기본: 3600000 (1시간)
JOB_CLEANUP_MAX_AGE_MS=3600000

# 작업 정리 주기 (밀리초) - 기본: 600000 (10분)
JOB_CLEANUP_INTERVAL_MS=600000

# ==============================================================================
# Screenshot (Puppeteer)
# ==============================================================================

# 페이지 로딩 타임아웃 (밀리초) - 기본: 30000 (30초)
SCREENSHOT_NAVIGATION_TIMEOUT_MS=30000

# 기본 뷰포트 너비 (기본: 1920)
SCREENSHOT_DEFAULT_WIDTH=1920

# 기본 뷰포트 높이 (기본: 1080)
SCREENSHOT_DEFAULT_HEIGHT=1080

# 스크린샷 후 대기 시간 (밀리초) - 기본: 1000 (1초)
SCREENSHOT_WAIT_AFTER_LOAD_MS=1000

# 기본 이미지 형식 (png | jpeg | webp)
SCREENSHOT_DEFAULT_FORMAT=png

# 기본 이미지 품질 (1-100) - 기본: 80
SCREENSHOT_DEFAULT_QUALITY=80

# 전체 페이지 캡처 기본값 (true | false)
SCREENSHOT_DEFAULT_FULL_PAGE=true

# ==============================================================================
# Webhook Callback
# ==============================================================================

# Webhook 최대 재시도 횟수 (기본: 3)
CALLBACK_MAX_RETRIES=3

# Webhook 재시도 지연 시간 (밀리초)
CALLBACK_RETRY_DELAY_1_MS=60000    # 1분
CALLBACK_RETRY_DELAY_2_MS=300000   # 5분
CALLBACK_RETRY_DELAY_3_MS=900000   # 15분

# Webhook 요청 타임아웃 (밀리초) - 기본: 10000 (10초)
CALLBACK_TIMEOUT_MS=10000

# Webhook User-Agent
CALLBACK_USER_AGENT=Screenshot-API/1.0

# ==============================================================================
# Storage Configuration
# ==============================================================================

# 로컬 스토리지 디렉토리 (기본: public/screenshots)
STORAGE_LOCAL_DIR=public/screenshots

# S3/R2 Bucket 이름
S3_BUCKET=your-bucket-name

# S3 Region (AWS S3: us-east-1, Cloudflare R2: auto)
S3_REGION=auto

# S3 Access Key ID
S3_ACCESS_KEY_ID=your_access_key

# S3 Secret Access Key
S3_SECRET_ACCESS_KEY=your_secret_key

# S3 Endpoint (Cloudflare R2: https://your-account.r2.cloudflarestorage.com)
S3_ENDPOINT=https://your-account.r2.cloudflarestorage.com

# S3 Signed URL 만료 시간 (초) - 기본: 86400 (24시간)
S3_SIGNED_URL_EXPIRY=86400

# ==============================================================================
# Redis (독립 워커 모드 사용 시)
# ==============================================================================

# Redis Connection URL (예: redis://localhost:6379)
# REDIS_URL=redis://localhost:6379

# ==============================================================================
# Development & Logging
# ==============================================================================

# 상세 로그 출력 (true | false)
VERBOSE_LOGGING=false
